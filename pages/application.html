<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>조호물품 신청 - 치매안심센터</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <style>
        /* 물품분류 스타일 - 장바구니 스타일 제거함 */
        .category-sidebar {
            width: 250px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .category-sidebar h3 {
            margin-bottom: 15px;
            font-size: 18px;
            color: var(--text-color);
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .category-sidebar ul {
            padding: 0;
        }
        
        .category-sidebar ul li {
            margin-bottom: 12px;
        }
        
        .category-sidebar ul li a {
            display: block;
            padding: 8px 15px;
            color: var(--text-color);
            border-radius: 30px;
            transition: all 0.3s;
        }
        
        .category-sidebar ul li a:hover {
            background-color: #f0f0f0;
        }
        
        .category-sidebar ul li a.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .product-category {
            display: flex;
            gap: 20px;
        }
        
        .product-container {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 20px;
        }
        
        .product-item {
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .product-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        .btn-apply {
            width: 80%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin: 0 auto;
        }
        
        .text-center {
            text-align: center;
        }

        /* 숫자 입력 화살표 제거 - 모든 브라우저 호환 */
        /* Chrome, Safari, Edge, Opera에서 화살표 제거 */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
        }

        /* Firefox에서 화살표 제거 */
        input[type="number"] {
            -moz-appearance: textfield;
            appearance: textfield;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 헤더 영역 -->
<header>
    <div class="header-top">
        <div class="utility-menu">
            <a href="login.html">로그인</a>
            <a href="register.html">회원가입</a>
            <a href="customer-service.html">고객센터</a>
        </div>
    </div>
    <div class="header-main">
        <div class="logo">
            <a href="../index.html"><img src="../images/logo.png" alt="치매안심센터 로고" onerror="this.src='https://via.placeholder.com/150x50?text=로고'"></a>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="필요하신 조호물품을 검색해보세요">
            <button type="submit">검색하기</button>
        </div>
        <div class="header-icons">
            <a href="mypage.html" class="icon my-page"><span>신청내역</span></a>
            <a href="myinfo.html" class="icon user"><span>내정보</span></a>
            <a href="cart.html" class="icon cart" data-count="0"><span>장바구니</span></a>
        </div>
    </div>
    <!-- 네비게이션 메뉴 -->
    <nav>
        <ul class="main-nav">
            <li><a href="application.html">조호물품 신청</a></li>
            <li><a href="guide.html">이용안내</a></li>
            <li><a href="info.html">자주하는 질문</a></li>
            <li><a href="notice.html">공지사항</a></li>
        </ul>
    </nav>
</header>

        <!-- 메인 콘텐츠 영역 -->
        <main>
            <section class="page-header">
                <h1>조호물품 신청</h1>
            </section>

            <section class="product-category">
                <div class="category-sidebar">
                    <h3>조호물품 카테고리</h3>
                    <ul>
                        <li><a href="#" class="active" data-category="all">전체 조호물품</a></li>
                        <li><a href="#" data-category="hygiene">위생용품 (12)</a></li>
                        <li><a href="#" data-category="daily">생활용품 (8)</a></li>
                        <li><a href="#" data-category="meal">식사용품 (6)</a></li>
                        <li><a href="#" data-category="safety">안전용품 (5)</a></li>
                        <li><a href="#" data-category="rehab">재활용품 (4)</a></li>
                    </ul>
                </div>

                <div class="product-container">
                    <!-- 1번 상품: 성인용 기저귀 -->
                    <div class="product-item" data-category="hygiene" data-id="1">
                        <img src="../images/product1.jpg" alt="성인용 기저귀">
                        <h3>성인용 기저귀</h3>
                        <p>중형 (20매)</p>
                        <button class="btn-apply" data-id="1">신청하기</button>
                    </div>
                    
                    <!-- 2번 상품: 조호용 물티슈 -->
                    <div class="product-item" data-category="hygiene" data-id="2">
                        <img src="../images/product2.jpg" alt="조호용 물티슈">
                        <h3>조호용 물티슈</h3>
                        <p>대형 (100매)</p>
                        <button class="btn-apply" data-id="2">신청하기</button>
                    </div>
                    
                    <!-- 3번 상품: 방수 매트 -->
                    <div class="product-item" data-category="daily" data-id="3">
                        <img src="../images/product3.jpg" alt="방수 매트" >
                        <h3>방수 매트</h3>
                        <p>침대용 (17매)</p>
                        <button class="btn-apply" data-id="3">신청하기</button>
                    </div>
                    
                    <!-- 4번 상품: 목욕용품 세트 -->
                    <div class="product-item" data-category="hygiene" data-id="4">
                        <img src="../images/product4.jpg" alt="목욕용품">
                        <h3>목욕용품 세트</h3>
                        <p>종합 세트 (1박스)</p>
                        <button class="btn-apply" data-id="4">신청하기</button>
                    </div>
                    
                    <!-- 5번 상품: 항균 손소독제 -->
                    <div class="product-item" data-category="hygiene" data-id="5">
                        <img src="../images/product5.jpg" alt="손소독제">
                        <h3>항균 손소독제</h3>
                        <p>500ml (2개)</p>
                        <button class="btn-apply" data-id="5">신청하기</button>
                    </div>
                    
                    <!-- 6번 상품: 일회용 장갑 -->
                    <div class="product-item" data-category="safety" data-id="6">
                        <img src="../images/product6.jpg" alt="일회용장갑">
                        <h3>일회용 장갑</h3>
                        <p>100매 (1박스)</p>
                        <button class="btn-apply" data-id="6">신청하기</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- 푸터 영역 -->
        <footer>
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="../images/logo.png" alt="치매안심센터 로고" onerror="this.src='https://via.placeholder.com/120x40?text=로고'">
                </div>
                <div class="footer-info">
                    <p>치매안심센터 | 주소: 서울특별시 종로구 종로1길 1 | 대표전화: 02-123-4567</p>
                    <p>Copyright © 2025 치매안심센터 조호물품 신청 서비스. All rights reserved.</p>
                </div>
                <div class="footer-links">
                    <a href="#">개인정보처리방침</a>
                    <a href="#">이용약관</a>
                    <a href="#">사이트맵</a>
                </div>
            </div>
        </footer>
    </div>

<!-- 기존 스크립트 교체 -->
<script src="../js/main.js"></script>
<script src="../js/api.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('조호물품 페이지 로드됨');
    
    // 로그인 확인
    if (!currentUser) {
        alert('로그인이 필요합니다!');
        window.location.href = 'login.html';
        return;
    }
    
    console.log('로그인된 사용자:', currentUser.name);
    
    // 모든 이벤트 리스너 제거 (기존 충돌 방지)
    const allButtons = document.querySelectorAll('.btn-apply');
    allButtons.forEach(button => {
        // 기존 버튼을 복제하여 모든 이벤트 리스너 제거
        const newButton = button.cloneNode(true);
        button.parentNode.replaceChild(newButton, button);
    });
    
    // 새로운 버튼들에 이벤트 리스너 추가
    const applyButtons = document.querySelectorAll('.btn-apply');
    console.log('신청 버튼 개수:', applyButtons.length);
    
    applyButtons.forEach(function(button, index) {
        console.log(`버튼 ${index + 1}: data-id = ${button.getAttribute('data-id')}`);
        
        button.addEventListener('click', function(e) {
            e.preventDefault(); // 기본 동작 방지
            e.stopPropagation(); // 이벤트 버블링 방지
            
            // getAttribute 방식으로 통일
            const productId = this.getAttribute('data-id');
            console.log(`클릭된 버튼의 상품 ID: ${productId}`);
            
            // 상품 ID 검증
            if (!productId) {
                console.error('상품 ID를 찾을 수 없습니다.');
                alert('상품 정보를 찾을 수 없습니다.');
                return;
            }
            
            // 각 상품별 상세페이지로 이동
            const targetUrl = `product-detail.html?id=${productId}`;
            console.log(`이동할 URL: ${targetUrl}`);
            
            // 실제 페이지 이동
            window.location.href = targetUrl;
        });
    });
    
    // 카테고리 필터링 기능
    const categoryLinks = document.querySelectorAll('.category-sidebar a');
    const productItems = document.querySelectorAll('.product-item');
    
    categoryLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            // 모든 링크에서 active 클래스 제거
            categoryLinks.forEach(item => item.classList.remove('active'));
            
            // 클릭한 링크에 active 클래스 추가
            this.classList.add('active');
            
            // 카테고리 필터링
            const category = this.getAttribute('data-category');
            
            productItems.forEach(item => {
                if (category === 'all' || item.getAttribute('data-category') === category) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    });
    
    // 상품 카드 클릭 이벤트 (신청하기 버튼과 분리)
    productItems.forEach(item => {
        item.addEventListener('click', function(e) {
            // 신청하기 버튼을 클릭한 경우는 제외
            if (e.target.classList.contains('btn-apply') || e.target.closest('.btn-apply')) {
                console.log('버튼 클릭 감지 - 카드 클릭 이벤트 무시');
                return;
            }
            
            const productId = this.getAttribute('data-id');
            if (productId) {
                console.log('상품 카드 클릭 - 상품 ID:', productId);
                window.location.href = `product-detail.html?id=${productId}`;
            }
        });
    });
    
    // 디버깅용 - 모든 상품 정보 출력
    console.log('=== 상품 버튼 정보 ===');
    applyButtons.forEach((button, index) => {
        const productId = button.getAttribute('data-id');
        const productName = button.closest('.product-item')?.querySelector('h3')?.textContent || '이름 없음';
        console.log(`버튼 ${index + 1}: ID=${productId}, 상품명=${productName}`);
    });
});
</script>
</body>
</html>